<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Frameset//EN">
<html>
<head>
<title>Legato Graphics Library</title>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <meta name="generator" content="Doc-O-Matic" />
    <meta http-equiv="Content-Style-Type" content="text/css" />
    <link rel="STYLESHEET" href="default.css" type="text/css" />

<script type="text/javascript" src="scripts.js"></script>
</head>
<body class="Element700" onload="onBodyLoadEx('frames.html', 'topic', '00525.html');" onmousedown="onBodyMouseDown();">

<!-- Begin Popups -->

<!-- End Popups -->

<!-- Begin Page Header -->
<div class="Element710" id="areafixed">
<div class="Element94">
<a href="00410.html" target="topic">MPLAB® Harmony Graphics Suite</a> &gt; <a href="00527.html" target="topic">Graphics Library</a> &gt; <a href="00525.html" target="topic">Legato Graphics Library</a></div>
<div class="Element92">
<table width="100%" cellspacing="0" cellpadding="0">
<tr><td width="25%">
<div class="Element1">
MPLAB® Harmony Graphics Suite</div>
</td><td width="25%">
<div class="Element2">
<a href="contents.html" target="tocidx">Contents</a> | <a href="00410.html" target="topic">Home</a></div>
</td><td width="25%">
<div class="Element90">
<a href="00536.html" target="topic">Previous</a> | <a href="00527.html" target="topic">Up</a> | <a href="00541.html" target="topic">Next</a></div>
</td><td width="25%">
<div class="Element96">
<a href="mailto:docerrors@microchip.com&subject=MPLAB Harmony Documentation Feedback (Topic ID: GFXLIB Graphics Legato User Interface Library Topic Title: Legato Graphics Library)&body=Thank you for your feedback! Please include a description of your feedback, and indicate whether you are reporting an an error in the documentation or an enhancement.">Documentation Feedback</a><br> <a href="http://support.microchip.com" target="_blank">Microchip Support</a></div>
</td></tr></table><div class="Element5">
Legato Graphics Library</div>
</div>
</div>

<!-- End Page Header -->

<!-- Begin Client Area -->
<div class="Element720" id="areascroll">
<div class="Element721">

<!-- Begin Page Content -->
<a name="PageContent"></a><div class="Element58">
<a name="4465736372697074696F6E"></a><div class="Element11">
<div class="Element10">
<p class="Element10">
The legato graphics library is the next generation graphics library for the MPLAB Harmony Graphics Suite. Beside provide all the capabilities of the Legato graphics library, it focuses on support for low performance devices.&nbsp;</p>
<p class="Element10">
&nbsp;</p><div class="Element15">
Legato Features:</div>
<p class="Element10">
&nbsp;</p>
<p class="Element10">
Supported Cortex Devices</p>
<ul class="Element630">
<li class="Element600">SAM E54</li>
<li class="Element600">SAM E70</li>
</ul><p class="Element10">
&nbsp;</p>
<p class="Element10">
Supported MIPS Devices</p>
<ul class="Element630">
<li class="Element600">PIC32MZ DA</li>
<li class="Element600">PIC32MZ EF</li>
</ul><p class="Element10">
&nbsp;</p>
<p class="Element10">
Support Runtime Features</p>
<ul class="Element630">
<li class="Element600">Graphics RTOS</li>
</ul><p class="Element10">
&nbsp;</p>
<p class="Element10">
Supported Hardware and Peripherals</p>
<ul class="Element630">
<li class="Element600">External Controllers - SSD1963, SSD1306, ILI9488</li>
<li class="Element600">Internal Controllers - LCDC (A592), GLCD (MZ DA), GPU (MZ DA, SAM 9x60)</li>
</ul><p class="Element10">
&nbsp;</p>
<p class="Element10">
Similar to Aria, Legato is responsible for presenting a visual means of interaction between a user and an application. The library provides the building blocks to construct a complex user interface and is responsible for managing the interface once created. It is also responsible for responding to external input from users other sources and reacting appropriately. The goals of this library are to be:</p>
<ul class="Element630">
<li class="Element600">a simple but powerful user tool</li>
<li class="Element600">customizable to the needs of the application</li>
<li class="Element600">light and flexible with regards to resource consumption</li>
<li class="Element600">easily extensible to meet future design needs</li>
</ul><p class="Element10">
&nbsp;</p>
<div class="Element15">
Definitions</div>
<p class="Element10">
<strong>Alignment</strong> – Indicates the placement of objects within a given bounding area&nbsp;</p>
<p class="Element10">
<strong>Bounding Rectangle</strong> – The rectangle that an object occupies in a given space&nbsp;</p>
<p class="Element10">
<strong>Context</strong> – The global state of the library&nbsp;</p>
<p class="Element10">
<strong>Event</strong> – An indication of some kind of occurrence that may require attention&nbsp;</p>
<p class="Element10">
<strong>Layer</strong> – Directly related to the layers offered by hardware. Legato layers also function as direct children to a parent root. Widgets are added to root and become part of the overall widget tree context.&nbsp;</p>
<p class="Element10">
<strong>Margin</strong> – A buffer area at the edge of a bounding rectangle&nbsp;</p>
<p class="Element10">
<strong>Rasterize</strong> – The process of translating a user interface model from a logical mathematical representation into a visual image.&nbsp;</p>
<p class="Element10">
<strong>Scheme</strong> – A list of colors that can be referenced for drawing purposes&nbsp;</p>
<p class="Element10">
<strong>Screen</strong> – The root node of a widget tree. Represents a discrete configuration of layers and widgets. Can have a unique life cycle for custom memory management.&nbsp;</p>
<p class="Element10">
<strong>String</strong> – A logical array of linguistic characters&nbsp;</p>
<p class="Element10">
<strong>Widget</strong> – An abstract object that is part of a user interface&nbsp;</p>
<p class="Element10">
<strong>Widget Tree</strong> – A tree data structure of widgets that, when rendered, generates a user interface image.&nbsp;</p>
<p class="Element10">
&nbsp;</p><div class="Element15">
Overview</div>
<p class="Element10">
The legato graphics library is responsible for:</p>
<ul class="Element630">
<li class="Element600">Widget Tree Management</li>
<li class="Element600">Event Management</li>
<li class="Element600">Input Handling</li>
<li class="Element600">Scene Rendering</li>
</ul><p class="Element10">
&nbsp;</p>
<p class="Element10">
<strong>Widget Tree Management</strong>&nbsp;</p>
<p class="Element10">
The widget tree is a tree data structure comprised primarily of widgets. At its root is a screen object. Each of the screen object’s direct children is a layer object. Any descendants of a layer are widgets.&nbsp;</p>
<p class="Element10">
<strong>Heterogeneous Space</strong>&nbsp;</p>
<p class="Element10">
When dealing with objects in a tree it is helpful to understand objects do not live in the same coordinate space as their ancestors or descendants. Each level of the tree represents a unique area of spatial coordinates with the root coordinate space, or the screen space, being the physical space of the display device. Each space is a two dimensional Cartesian coordinate system in both the positive and negative directions.&nbsp;</p>
<p class="Element10">
For example, assume a widget is a child of a root which is a child of a screen. The screen position is (0,0) in physical space. The root position is (20,20). Widget 1 is at (20,20) and widget 2 is at (20,20). All of these coordinates aside from the screen are relative. Each widget is (20,20) offset from its parent. However, Widget 2 is not at (20,20) in physical space, it’s actually (60,60). In global space each space builds on its parent, but it’s entirely relative.&nbsp;</p>
<p class="Element10">
&nbsp;</p>
<p class="Element10">
Using a tree to manage the logical state of a user interface provides numerous benefits.</p>
<ul class="Element630">
<li class="Element600"><strong>Position Inheritance</strong> – Child coordinate systems logically inherit from their parents but are not directly affected by them. Thus, if some ancestor changes position in its space, children likewise change overall position but their positions in their relative space do not change. This allows for easy manipulation of large portions of the user interface through very small changes.</li>
<li class="Element600"><strong>Intelligent Rendering</strong> – The tree structure allows for fast analysis of widget states when determining how and when to render the overall scene. Nodes in the tree track changes in the states of widgets and their descendants. This allows the library to use intelligent methods to cull portions of the user interface to avoid the processing overhead of redrawing widgets that have not changed.</li>
<li class="Element600"><strong>Effect Propagation</strong> – As with coordinate propagation, effects can also be inherited along tree branches. For instance, if some node in the tree is made invisible, all descendants are also made invisible. If a node is made partially transparent, then that transparency is propagated to all descendant nodes.</li>
</ul><p class="Element10">
<strong>Screens</strong>&nbsp;</p>
<p class="Element10">
A screen is defined as the logical root of the user interface scene. Its direct descendants are always one or more layers, as seen in the above diagram. Its size always matches the physical dimensions of the display device used.&nbsp;</p>
<p class="Element10">
<strong>Life Cycle</strong>&nbsp;</p>
<p class="Element10">
The life cycle of a screen can be configured to better manage run-time memory usage. The relevant options are:&nbsp;</p>
<p class="Element10">
<strong>Persistent</strong> – By default screens will create their widget tree when shown and will free the memory consumed by their widget tree when they are hidden. A screen that is marked as persistent will not free their widget tree when hidden. This allows widgets in a screen to maintain their state when the screen is no longer visible. The downside is that more heap memory is consumed.&nbsp;</p>
<p class="Element10">
<strong>Create At Startup</strong> – By default screens are only created when they are shown thus keeping run-time memory usage to a minimum. However, the application may want to access widgets in a screen before it is shown for the first time. This option will cause the screen to allocate all of its memory when the screen is first added to the user interface library context.&nbsp;</p>
<p class="Element10">
<strong>Orientation</strong>&nbsp;</p>
<p class="Element10">
Because the hardware and its drivers support dynamic orthogonal orientation, screens can take advantage of this feature. Thus, screens have the option to set a magnitude of rotation to some factor of 90 degrees.&nbsp;</p>
<p class="Element10">
<strong>Layers</strong>&nbsp;</p>
<p class="Element10">
User interface layers serve several functions. They function as the root parent for widgets, they directly correspond to hardware layers in the graphics driver. Layer management is handled by display drivers and not by Legato.&nbsp;</p>
<p class="Element10">
In the simplest case the hardware supports a single layer that is the same dimension as the physical display. More advanced cases may have several layers.&nbsp;</p>
<p class="Element10">
&nbsp;</p>
<p class="Element10">
<strong>Schemes</strong>&nbsp;</p>
<p class="Element10">
Schemes in Legato are simply collections of colors with given names. If a scheme is assigned to a widget then that scheme will be referenced by that widget during rendering. Legato has an internal scheme that all widgets use by default in the event that a scheme is not assigned.&nbsp;</p>
<p class="Element10">
Below is a list of scheme colors and a description of how it is often used. There is no restriction on how a widget references a scheme. The color names are merely a recommendation.&nbsp;</p>
<p class="Element10">
<strong>Scheme Colors</strong>&nbsp;</p>
<ul class="Element630">
<li class="Element600"><strong>Base</strong> – Default area fill</li>
<li class="Element600"><strong>Highlight</strong> – Light embossing</li>
<li class="Element600"><strong>Highlight Light</strong> – Very light embossing</li>
<li class="Element600"><strong>Shadow</strong> – Dark embossing</li>
<li class="Element600"><strong>Shadow Dark</strong> – Very dark embossing</li>
<li class="Element600"><strong>Foreground</strong> – A foreground color</li>
<li class="Element600"><strong>Foreground Inactive</strong> – Foreground color when inactive</li>
<li class="Element600"><strong>Foreground Disabled</strong> – Foreground color when disabled</li>
<li class="Element600"><strong>Background</strong> – A background color, usually to differentiate from Base</li>
<li class="Element600"><strong>Background Inactive</strong> – Background when inactive</li>
<li class="Element600"><strong>Background Disabled</strong> – Background when disabled</li>
<li class="Element600"><strong>Text</strong> – Text color</li>
<li class="Element600"><strong>Text Highlight</strong> – Text color background when highlighted</li>
<li class="Element600"><strong>Text Highlight Text</strong> – Text color when highlighted</li>
<li class="Element600"><strong>Text Inactive</strong> – Text color when inactive</li>
<li class="Element600"><strong>Text Disabled</strong> – Text color when disabled</li>
</ul><p class="Element10">
<strong>Widgets</strong>&nbsp;</p>
<p class="Element10">
A widget is an abstract representation of an object in the user interface. In its most basic form it is a rectangle that is capable of drawing a border, a background color, and containing child widgets. More specific implementations extend the basic widget implementation to provide advanced functionality.&nbsp;</p>
<p class="Element10">
The Legato library relies on function pointers to take advantage of some object oriented programming concepts like inheritance and polymorphism.&nbsp;</p>
<p class="Element10">
Widgets are typically created by calling their specific “new” function. For instance: “<a href="02967.html" target="topic">leWidget_New</a>()” will allocate a new basic widget and return a pointer to it (similar to calling new in C++). Calling this function will automatically initialize the widget by calling the constructor for that widget. Deleting widgets is done through the use of the function “<a href="02966.html" target="topic">leWidget_Delete</a>()”.&nbsp;</p>
<p class="Element10">
Widgets can then be added to layers or other widgets as desired.&nbsp;</p>
<p class="Element10">
<strong>Edit Widgets</strong>&nbsp;</p>
<p class="Element10">
Edit widgets are a special class of widget that inherits from the EditWidget base implementation instead of Widget. These widgets are capable of becoming the active “edit” widget which means that they will receive any edit events raised by a widget capable of issuing edit events, such as a key pad.&nbsp;</p>
<p class="Element10">
<strong>Widget Implementations</strong>&nbsp;</p>
<p class="Element10">
The following are descriptions of the widgets offered by Legato:</p>
<ul class="Element630">
<li class="Element600">Button
<ul class="Element631">
<li class="Element601">Standard button type widget.</li>
<li class="Element601">Can have text and image icon.</li>
<li class="Element601">Has a toggle mode.</li>
</ul></li>
<li class="Element600">Check Box
<ul class="Element631">
<li class="Element601">Standard check box widget.</li>
<li class="Element601">Has built in image for checked and unchecked state.</li>
<li class="Element601">Can use custom image for checked and unchecked state.</li>
</ul></li>
<li class="Element600">Circle
<ul class="Element631">
<li class="Element601">Widget that draws a circle</li>
</ul></li>
<li class="Element600">Draw Surface
<ul class="Element631">
<li class="Element601">Widget that has a callback during its paint loop</li>
<li class="Element601">Allows application to make raw draw calls during Legato's paint loop</li>
</ul></li>
<li class="Element600">Gradient
<ul class="Element631">
<li class="Element601">Widget that draws linearly interpolated gradient for its background</li>
<li class="Element601">Can use as a parent for other widgets to achieve custom backgrounds</li>
</ul></li>
<li class="Element600">Group Box
<ul class="Element631">
<li class="Element601">Widget that functions as a decorated container</li>
<li class="Element601">Offers a line border and a horizontally aligned title</li>
</ul></li>
<li class="Element600">Image
<ul class="Element631">
<li class="Element601">Widget that draws an image</li>
<li class="Element601">Image is clipped to the bounds of the widget.</li>
<li class="Element601">Image can be vertically or horizontally aligned to the bounds of the widget</li>
</ul></li>
<li class="Element600">Image Sequence
<ul class="Element631">
<li class="Element601">Widget that functions as an automatic image slideshow renderer</li>
<li class="Element601">Can add a sequence of widgets and a list of time delays</li>
<li class="Element601">Can automatically cycle through list of images without application input</li>
</ul></li>
<li class="Element600">Key Pad
<ul class="Element631">
<li class="Element601">A grid of button widgets</li>
<li class="Element601">Buttons can be configured to send edit events to the library edit API</li>
</ul></li>
<li class="Element600">Label
<ul class="Element631">
<li class="Element601">Widget that draws a string</li>
<li class="Element601">Can be aligned vertically and horizontally</li>
</ul></li>
<li class="Element600">Line
<ul class="Element631">
<li class="Element601">Widget that draws a line between two specified coordinates</li>
</ul></li>
<li class="Element600">List
<ul class="Element631">
<li class="Element601">A list box of strings</li>
<li class="Element601">Strings can have icons</li>
<li class="Element601">Can be configured to have single, sequential, or multi-selection state</li>
</ul></li>
<li class="Element600">List Wheel
<ul class="Element631">
<li class="Element601">A rotating wheel of strings</li>
<li class="Element601">Cycles seamlessly through the list</li>
<li class="Element601">Responds to drag input</li>
</ul></li>
<li class="Element600">Panel Widget
<ul class="Element631">
<li class="Element601">Panels are containers of other widgets, including daughter panels, in support of a parent-child tree of widgets, with the Panel widget as the parent</li>
</ul></li>
<li class="Element600">Progress Bar
<ul class="Element631">
<li class="Element601">Widget that fills in a direction based on a given percentage</li>
</ul></li>
<li class="Element600">Radio Button
<ul class="Element631">
<li class="Element601">A button that can belong to a group of radio buttons</li>
<li class="Element601">Only one button in group can be selected at any one time</li>
</ul></li>
<li class="Element600">Rectangle
<ul class="Element631">
<li class="Element601">Widget that draws a rectangle</li>
</ul></li>
<li class="Element600">Scroll Bar
<ul class="Element631">
<li class="Element601">A scroll bar that has a configurable scroll range.</li>
<li class="Element601">Normally embedded in other widgets like the list box</li>
</ul></li>
<li class="Element600">Slider
<ul class="Element631">
<li class="Element601">A widget that slides between a min and max value</li>
</ul></li>
<li class="Element600">Text Field
<ul class="Element631">
<li class="Element601">A field of text that can be modified by edit event inputs</li>
</ul></li>
<li class="Element600">Touch Text
<ul class="Element631">
<li class="Element601">A widget that draws lines based on input events</li>
<li class="Element601">Helps to demonstrate input functionality</li>
</ul></li>
<li class="Element600">Window
<ul class="Element631">
<li class="Element601">A container that can be decorated with a title bar</li>
<li class="Element601">Title bar can have title text and an icon</li>
</ul></li>
</ul><p class="Element10">
<strong>Event Management</strong>&nbsp;</p>
<p class="Element10">
The Legato state maintains an internal list of events that must get serviced frequently. This is done by called by &quot;<a href="02942.html" target="topic">leUpdate</a>()”. This is known as the ‘update loop’.&nbsp;</p>
<p class="Element10">
<strong>Input Handling</strong>&nbsp;</p>
<p class="Element10">
The user interface library has no knowledge of existing hardware but it must provide the means for the user to interact with the scene. Legato thus provides several generic APIs to allow any source to inject input events into the system. These events are stored in the internal event list and are handled during the next update phase.&nbsp;</p>
<p class="Element10">
<strong>Scene Rendering</strong>&nbsp;</p>
<p class="Element10">
The widget tree is a logical representation of the state of the user interface. The library must be capable of transforming this information into a visual representation that can be sent to the graphics display. The individual widgets contain the algorithms necessary to render themselves but Legato is responsible for telling the widgets when to render themselves. This is known as the ‘paint loop’&nbsp;</p>
<p class="Element10">
The library is responsible for evaluating the widget tree to detect widgets that indicate invalid visual states and managing the redraw. It is essential that widgets only redraw when necessary to avoid needlessly consuming processing resources. It is also important that the library not attempt to draw too much at once as that may starve the rest of the application.&nbsp;</p>
<p class="Element10">
&nbsp;</p>
<p class="Element10">
<strong>How to Use the Library</strong>&nbsp;</p>
<p class="Element10">
&nbsp;</p>
<p class="Element10">
Online documentation in addition to topics listed in this manual can be found at <a href="#" onclick="openExternalLink('https://github.com/Microchip-MPLAB-Harmony/gfx/wiki');"><img src="indicator_external_link.gif" border="0" alt="" title="">Graphics Overview</a> and <a href="#" onclick="openExternalLink('https://github.com/Microchip-MPLAB-Harmony/gfx/wiki/Creating-a-New-Graphics-Application');"><img src="indicator_external_link.gif" border="0" alt="" title="">Creating a New Graphics Application</a>.</p></div>
</div>
<a name="546F70696373"></a><div class="Element14">
Topics</div>
<div class="Element11">
<div class="Element10">
<div class="Element212">
<div class="TableDiv">
<table cellspacing="0" class="Table1">
<tr>
<td class="Element200" valign="top" width="35%">
<div class="Element201">
Name&nbsp;</div></td><td class="Element204" valign="top" width="65%">
<div class="Element205">
Description&nbsp;</div></td></tr><tr>
<td class="Element202" valign="top" width="35%">
<div class="Element203">
<a href="00541.html" target="topic">Legato Interface</a>&nbsp;</div></td><td class="Element206" valign="top" width="65%">
<div class="Element207">
 &nbsp;</div></td></tr><tr>
<td class="Element202" valign="top" width="35%">
<div class="Element203">
<a href="00540.html" target="topic">Files</a>&nbsp;</div></td><td class="Element206" valign="top" width="65%">
<div class="Element207">
 &nbsp;</div></td></tr></table></div></div>
</div>
</div>
</div>
<!-- End Page Content -->

<!-- Begin Page Footer -->
<div class="Element95">
<a href="00410.html" target="topic">MPLAB® Harmony Graphics Suite</a> &gt; <a href="00527.html" target="topic">Graphics Library</a> &gt; <a href="00525.html" target="topic">Legato Graphics Library</a></div>
<div class="Element93">
<table width="100%" cellspacing="0" cellpadding="0">
<tr><td width="25%">
<div class="Element3">
MPLAB® Harmony Graphics Suite</div>
</td><td width="25%">
<div class="Element4">
<a href="contents.html" target="tocidx">Contents</a> | <a href="00410.html" target="topic">Home</a></div>
</td><td width="25%">
<div class="Element91">
<a href="00536.html" target="topic">Previous</a> | <a href="00527.html" target="topic">Up</a> | <a href="00541.html" target="topic">Next</a></div>
</td><td width="25%">
<div class="Element97">
<a href="mailto:docerrors@microchip.com&subject=MPLAB Harmony Documentation Feedback (Topic ID: GFXLIB Graphics Legato User Interface Library Topic Title: Legato Graphics Library)&body=Thank you for your feedback! Please include a description of your feedback, and indicate whether you are reporting an an error in the documentation or an enhancement.">Documentation Feedback</a><br> <a href="http://support.microchip.com" target="_blank">Microchip Support</a></div>
</td></tr></table></div>

<!-- End Page Footer -->
</div>
</div>

<!-- End Client Area -->
</body></html>